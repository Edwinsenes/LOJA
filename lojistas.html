<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrÃ§amento de Portas em ACM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 40px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background: linear-gradient(135deg, #9e9e9e, #757575);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        h2 {
            color: #34495e;
            font-size: 22px;
            font-weight: 600;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e74c3c;
            position: relative;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 2px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            color: #2c3e50;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .form-group input[type="text"],
        .form-group input[type="number"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            font-family: inherit;
        }
        
        .form-group input[type="text"]:focus,
        .form-group input[type="number"]:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #e74c3c;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
            transform: translateY(-2px);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 60px;
        }
        
        .add-item-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .add-item-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
        }
        
        .download-btn {
            background: linear-gradient(135deg, #9e9e9e, #757575);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            display: block;
            width: 100%;
            margin-top: 30px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(158, 158, 158, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(158, 158, 158, 0.4);
        }
        
        .porta-section, .item-section {
            border: 2px solid #ecf0f1;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 249, 250, 0.9));
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .porta-section::before, .item-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .porta-section:hover, .item-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
        }
        
        .porta-section h3, .item-section h3 {
            margin-top: 0;
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 18px;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 1px solid #e1e8ed;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .brise-item-section {
            border-color: #f39c12;
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.05), rgba(230, 126, 34, 0.05));
        }
        
        .brise-item-section::before {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .brise-item-section h3 {
            color: #e67e22;
        }
        
        .extra-item-section {
            border-color: #9e9e9e;
            background: linear-gradient(135deg, rgba(158, 158, 158, 0.05), rgba(117, 117, 117, 0.05));
        }
        
        .extra-item-section::before {
            background: linear-gradient(135deg, #9e9e9e, #757575);
        }
        
        .extra-item-section h3 {
            color: #757575;
        }
        
        .remove-item-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
        }
        
        .remove-item-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
        }
        
        .summary-section {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(52, 73, 94, 0.05), rgba(44, 62, 80, 0.05));
            border-radius: 20px;
            border: 2px solid #ecf0f1;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }
        
        .summary-section h3 {
            color: #2c3e50;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .total-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        .total-value {
            color: #27ae60;
            font-size: 28px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .total-display {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
        
        .language-selector {
            text-align: right;
            margin-bottom: 20px;
        }
        
        .language-selector select {
            padding: 8px 12px;
            border: 2px solid #e1e8ed;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .language-selector select:focus {
            outline: none;
            border-color: #e74c3c;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="language-selector">
            <select id="languageSelect" onchange="changeLanguage()">
                <option value="pt">ðŸ‡§ðŸ‡· PortuguÃªs</option>
                <option value="en">ðŸ‡ºðŸ‡¸ English</option>
                <option value="it">ðŸ‡®ðŸ‡¹ Italiano</option>
            </select>
        </div>
        
        <h1 data-lang-pt="OrÃ§amento de Portas em ACM" data-lang-en="ACM Door Budget" data-lang-it="Preventivo Porte ACM">OrÃ§amento de Portas em ACM</h1>

        <div class="form-group">
            <label for="vendedor" data-lang-pt="Nome do Vendedor:" data-lang-en="Salesperson Name:" data-lang-it="Nome del Venditore:">Nome do Vendedor:</label>
            <input type="text" id="vendedor" name="vendedor">
        </div>

        <div class="form-group">
            <label for="loja" data-lang-pt="NÃºmero da Loja:" data-lang-en="Store Number:" data-lang-it="Numero del Negozio:">NÃºmero da Loja:</label>
            <input type="text" id="loja" name="loja">
        </div>

        <div class="form-group">
            <label for="pedido" data-lang-pt="NÃºmero do Pedido:" data-lang-en="Order Number:" data-lang-it="Numero dell'Ordine:">NÃºmero do Pedido:</label>
            <input type="text" id="pedido" name="pedido" readonly style="background-color: #f8f9fa;">
        </div>

        <div class="form-group">
            <label for="numeroPortas" data-lang-pt="NÃºmero de Portas:" data-lang-en="Number of Doors:" data-lang-it="Numero di Porte:">NÃºmero de Portas:</label>
            <input type="number" id="numeroPortas" name="numeroPortas" min="0" value="1" onchange="atualizarPortas()">
        </div>

        <h2 id="detalhesPortasTitulo" data-lang-pt="Detalhes das Portas" data-lang-en="Door Details" data-lang-it="Dettagli delle Porte">Detalhes das Portas</h2>
        <div id="portasContainer">
            <!-- As portas serÃ£o geradas dinamicamente aqui -->
        </div>

        <h2 data-lang-pt="BRISE" data-lang-en="BRISE" data-lang-it="BRISE">BRISE</h2>
        <div class="form-group">
            <label data-lang-pt="NÃºmero de BRISE:" data-lang-en="Number of BRISE:" data-lang-it="Numero di BRISE:">NÃºmero de BRISE:</label>
            <input type="number" id="numeroBrise" min="0" value="0" oninput="atualizarBrise()">
        </div>
        <div id="briseItensContainer"></div>

        <h2 data-lang-pt="EXTRAS" data-lang-en="EXTRAS" data-lang-it="EXTRAS">EXTRAS</h2>
        <div class="form-group">
            <label data-lang-pt="NÃºmero de Itens Extras:" data-lang-en="Number of Extra Items:" data-lang-it="Numero di Articoli Extra:">NÃºmero de Itens Extras:</label>
            <input type="number" id="numeroItensExtras" min="0" value="0" oninput="atualizarItensExtras()">
        </div>
        <div id="itensExtrasContainer">
            <!-- Os itens extras serÃ£o gerados dinamicamente aqui -->
        </div>

        <div class="summary-section">
            <h3 data-lang-pt="Resumo do OrÃ§amento" data-lang-en="Budget Summary" data-lang-it="Riepilogo del Preventivo">Resumo do OrÃ§amento</h3>
            <div class="total-display">
                <span data-lang-pt="Total Geral:" data-lang-en="Grand Total:" data-lang-it="Totale Generale:">Total Geral:</span>
                <span id="totalGeral" class="total-value">R$ 0,00</span>
            </div>
        </div>

        <button type="button" class="download-btn" onclick="gerarPDF()" data-lang-pt="Baixar OrÃ§amento (PDF)" data-lang-en="Download Budget (PDF)" data-lang-it="Scarica Preventivo (PDF)">Baixar OrÃ§amento (PDF)</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // TraduÃ§Ãµes para os idiomas
        const translations = {
            pt: {
                title: "OrÃ§amento de Portas em ACM",
                salesperson: "Nome do Vendedor:",
                storeNumber: "NÃºmero da Loja:",
                orderNumber: "NÃºmero do Pedido:",
                numberOfDoors: "NÃºmero de Portas:",
                doorDetails: "Detalhes das Portas",
                briseItems: "BRISE",
                numberOfBrise: "NÃºmero de BRISE:",
                extraItems: "EXTRAS",
                numberOfExtraItems: "NÃºmero de Itens Extras:",
                budgetSummary: "Resumo do OrÃ§amento",
                grandTotal: "Total Geral:",
                downloadPDF: "Baixar OrÃ§amento (PDF)",
                door: "Porta",
                description: "DescriÃ§Ã£o:",
                openingType: "Tipo de Abertura:",
                color: "Cor:",
                unitPrice: "PreÃ§o UnitÃ¡rio (R$):",
                observations: "ObservaÃ§Ãµes:",
                quantity: "Quantidade:",
                totalPrice: "PreÃ§o Total (R$):",
                m2: "MÂ²:",
                value: "Valor (R$):",
                type: "Tipo:",
                item: "Item",
                brise: "BRISE",
                extraItem: "Item Extra",
                select: "Selecione",
                pivoting: "PIVOTANTE",
                hinge: "DOBRADIÃ‡A",
                doubleSealing: "DUPLA VEDAÃ‡ÃƒO",
                sliding: "CORRER",
                enterSpecificColor: "Digite a cor especÃ­fica",
                enterObservations: "Digite observaÃ§Ãµes especÃ­ficas para esta porta...",
                enterDescription: "Digite a descriÃ§Ã£o do item",
                briseObservations: "ObservaÃ§Ãµes para o BRISE",
                itemType: "Tipo de Item:",
                itemTypePlaceholder: "Digite o tipo do item extra",
                price: "PreÃ§o (R$):",
                extraItemObservationsPlaceholder: "ObservaÃ§Ãµes para o item extra"
            },
            en: {
                title: "ACM Door Budget",
                salesperson: "Salesperson Name:",
                storeNumber: "Store Number:",
                orderNumber: "Order Number:",
                numberOfDoors: "Number of Doors:",
                doorDetails: "Door Details",
                briseItems: "BRISE",
                numberOfBrise: "Number of BRISE:",
                extraItems: "EXTRAS",
                numberOfExtraItems: "Number of Extra Items:",
                budgetSummary: "Budget Summary",
                grandTotal: "Grand Total:",
                downloadPDF: "Download Budget (PDF)",
                door: "Door",
                description: "Description:",
                openingType: "Opening Type:",
                color: "Color:",
                unitPrice: "Unit Price ($):",
                observations: "Observations:",
                quantity: "Quantity:",
                totalPrice: "Total Price ($):",
                m2: "MÂ²:",
                value: "Value ($):",
                type: "Type:",
                item: "Item",
                brise: "BRISE",
                extraItem: "Extra Item",
                select: "Select",
                pivoting: "PIVOTING",
                hinge: "HINGE",
                doubleSealing: "DOUBLE SEALING",
                sliding: "SLIDING",
                enterSpecificColor: "Enter specific color",
                enterObservations: "Enter specific observations for this door...",
                enterDescription: "Enter item description",
                briseObservations: "BRISE observations",
                itemType: "Item Type:",
                itemTypePlaceholder: "Enter extra item type",
                price: "Price ($):",
                extraItemObservationsPlaceholder: "Extra item observations"
            },
            it: {
                title: "Preventivo Porte ACM",
                salesperson: "Nome del Venditore:",
                storeNumber: "Numero del Negozio:",
                orderNumber: "Numero dell'Ordine:",
                numberOfDoors: "Numero di Porte:",
                doorDetails: "Dettagli delle Porte",
                briseItems: "BRISE",
                numberOfBrise: "Numero di BRISE:",
                extraItems: "EXTRAS",
                numberOfExtraItems: "Numero di Articoli Extra:",
                budgetSummary: "Riepilogo del Preventivo",
                grandTotal: "Totale Generale:",
                downloadPDF: "Scarica Preventivo (PDF)",
                door: "Porta",
                description: "Descrizione:",
                openingType: "Tipo di Apertura:",
                color: "Colore:",
                unitPrice: "Prezzo Unitario (â‚¬):",
                observations: "Osservazioni:",
                quantity: "QuantitÃ :",
                totalPrice: "Prezzo Totale (â‚¬):",
                m2: "MÂ²:",
                value: "Valore (â‚¬):",
                type: "Tipo:",
                item: "Articolo",
                brise: "BRISE",
                extraItem: "Articolo Extra",
                select: "Seleziona",
                pivoting: "PIVOTANTE",
                hinge: "CERNIERA",
                doubleSealing: "DOPPIA TENUTA",
                sliding: "SCORREVOLE",
                enterSpecificColor: "Inserisci colore specifico",
                enterObservations: "Inserisci osservazioni specifiche per questa porta...",
                enterDescription: "Inserisci descrizione articolo",
                briseObservations: "Osservazioni BRISE",
                itemType: "Tipo di Articolo:",
                itemTypePlaceholder: "Inserisci tipo articolo extra",
                price: "Prezzo (â‚¬):",
                extraItemObservationsPlaceholder: "Osservazioni articolo extra"
            }
        };

        let currentLanguage = 'pt';

        function changeLanguage() {
            const selectedLanguage = document.getElementById('languageSelect').value;
            currentLanguage = selectedLanguage;
            
            // Atualizar todos os elementos com atributos de traduÃ§Ã£o
            document.querySelectorAll('[data-lang-pt]').forEach(element => {
                const translation = element.getAttribute(`data-lang-${selectedLanguage}`);
                if (translation) {
                    element.textContent = translation;
                }
            });

            // Atualizar placeholders
            updatePlaceholders();
            
            // Regenerar portas, BRISE e extras para aplicar traduÃ§Ãµes
            atualizarPortas();
            atualizarBrise();
            atualizarItensExtras();
            calcularTotalGeral();
        }

        function updatePlaceholders() {
            const lang = translations[currentLanguage];
            
            // Atualizar placeholders dos campos existentes
            document.querySelectorAll('.cor').forEach(input => {
                input.placeholder = lang.enterSpecificColor;
            });
            
            document.querySelectorAll('.observacoes').forEach(textarea => {
                textarea.placeholder = lang.enterObservations;
            });
        }

        function gerarNumeroPedido() {
            const anoAtual = new Date().getFullYear();
            let ultimoNumero = localStorage.getItem(`ultimoNumeroPedido_${anoAtual}`);
            
            if (ultimoNumero === null) {
                ultimoNumero = 100; // ComeÃ§a a sequÃªncia de 100
            } else {
                ultimoNumero = parseInt(ultimoNumero) + 1;
            }
            
            localStorage.setItem(`ultimoNumeroPedido_${anoAtual}`, ultimoNumero);
            document.getElementById('pedido').value = `${anoAtual}-${ultimoNumero}`;
        }

        function atualizarPortas() {
            const numeroPortas = parseInt(document.getElementById("numeroPortas").value) || 0;
            const portasContainer = document.getElementById("portasContainer");
            const detalhesPortasTitulo = document.getElementById("detalhesPortasTitulo");
            const lang = translations[currentLanguage];

            if (numeroPortas === 0) {
                portasContainer.innerHTML = "";
                portasContainer.style.display = "none";
                detalhesPortasTitulo.style.display = "none";
            } else {
                portasContainer.style.display = "block";
                detalhesPortasTitulo.style.display = "block";
                portasContainer.innerHTML = "";
                
                for (let i = 1; i <= numeroPortas; i++) {
                    const portaSection = document.createElement("div");
                    portaSection.className = "porta-section";
                    portaSection.innerHTML = `
                        <h3>${lang.door} ${i}</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>${lang.description}</label>
                                <input type="text" class="descricao" value="${lang.door} ACM ${i}" oninput="calcularTotalGeral()">
                            </div>
                            <div class="form-group">
                                <label>${lang.openingType}</label>
                                <select class="tipoAbertura" oninput="calcularTotalGeral()">
                                    <option value="">${lang.select}</option>
                                    <option value="Pivotante">${lang.pivoting}</option>
                                    <option value="Dobradica">${lang.hinge}</option>
                                    <option value="Dupla Vedacao">${lang.doubleSealing}</option>
                                    <option value="Correr">${lang.sliding}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>${lang.color}</label>
                                <input type="text" class="cor" placeholder="${lang.enterSpecificColor}" oninput="calcularTotalGeral()">
                            </div>
                            <div class="form-group">
                                <label>${lang.unitPrice}</label>
                                <input type="number" class="precoUnitario" value="0.00" min="0" step="0.01" oninput="calcularTotalGeral()">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>${lang.observations}</label>
                            <textarea class="observacoes" placeholder="${lang.enterObservations}"></textarea>
                        </div>
                    `;
                    portasContainer.appendChild(portaSection);
                }
            }
            calcularTotalGeral();
        }

        function atualizarBrise() {
            const numeroBrise = parseInt(document.getElementById("numeroBrise").value) || 0;
            const briseContainer = document.getElementById("briseItensContainer");
            const lang = translations[currentLanguage];

            briseContainer.innerHTML = "";
            
            for (let i = 1; i <= numeroBrise; i++) {
                const briseSection = document.createElement("div");
                briseSection.className = "item-section brise-item-section";
                briseSection.innerHTML = `
                    <h3>${lang.brise} ${i}</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>${lang.color}</label>
                            <input type="text" class="briseCor" placeholder="${lang.enterSpecificColor}" oninput="calcularTotalGeral()">
                        </div>
                        <div class="form-group">
                            <label>${lang.m2}</label>
                            <input type="number" class="briseM2" value="0.00" min="0" step="0.01" oninput="calcularTotalGeral()">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>${lang.value}</label>
                            <input type="number" class="briseValor" value="0.00" min="0" step="0.01" oninput="calcularTotalGeral()">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>${lang.observations}</label>
                        <textarea class="briseObservacoes" placeholder="${lang.briseObservations}"></textarea>
                    </div>
                `;
                briseContainer.appendChild(briseSection);
            }
            calcularTotalGeral();
        }

        function atualizarItensExtras() {
            const numeroItensExtras = parseInt(document.getElementById("numeroItensExtras").value) || 0;
            const itensExtrasContainer = document.getElementById("itensExtrasContainer");
            const lang = translations[currentLanguage];

            itensExtrasContainer.innerHTML = "";
            
            for (let i = 1; i <= numeroItensExtras; i++) {
                const extraSection = document.createElement("div");
                extraSection.className = "item-section extra-item-section";
                extraSection.innerHTML = `
                    <h3>${lang.extraItem} ${i}</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>${lang.itemType}</label>
                            <input type="text" class="extraTipo" placeholder="${lang.itemTypePlaceholder}" oninput="calcularTotalGeral()">
                        </div>
                        <div class="form-group">
                            <label>${lang.quantity}</label>
                            <input type="number" class="extraQuantidade" value="1" min="1" step="1" oninput="calcularTotalGeral()">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>${lang.price}</label>
                            <input type="number" class="extraValor" value="0.00" min="0" step="0.01" oninput="calcularTotalGeral()">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>${lang.observations}</label>
                        <textarea class="extraObservacoes" placeholder="${lang.extraItemObservationsPlaceholder}"></textarea>
                    </div>
                `;
                itensExtrasContainer.appendChild(extraSection);
            }
            calcularTotalGeral();
        }

        function calcularTotalGeral() {
            let totalGeral = 0;
            
            // Somar preÃ§os das portas
            document.querySelectorAll(".porta-section").forEach(section => {
                const preco = parseFloat(section.querySelector(".precoUnitario").value) || 0;
                totalGeral += preco;
            });
            
            // Somar preÃ§os dos itens BRISE
            document.querySelectorAll(".brise-item-section").forEach(section => {
                const briseValor = parseFloat(section.querySelector(".briseValor").value) || 0;
                totalGeral += briseValor;
            });

            // Somar preÃ§os dos itens extras (quantidade Ã— valor)
            document.querySelectorAll(".extra-item-section").forEach(section => {
                const extraQuantidade = parseFloat(section.querySelector(".extraQuantidade").value) || 0;
                const extraValor = parseFloat(section.querySelector(".extraValor").value) || 0;
                totalGeral += (extraQuantidade * extraValor);
            });
            
            const currency = currentLanguage === 'en' ? '$' : currentLanguage === 'it' ? 'â‚¬' : 'R$';
            document.getElementById("totalGeral").textContent = `${currency} ${totalGeral.toFixed(2).replace(".", ",")}`;
        }

        function gerarPDF() {
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                const lang = translations[currentLanguage];
                
                // ConfiguraÃ§Ãµes de cores modernas
                const primaryColor = [231, 76, 60]; // #e74c3c - vermelho
                const secondaryColor = [52, 73, 94]; // #34495e
                const accentColor = [158, 158, 158]; // #9e9e9e - cinza
                const textColor = [44, 62, 80]; // #2c3e50
                const lightGray = [236, 240, 241]; // #ecf0f1
                
                let yPosition = 30;
                
                // TÃ­tulo principal com estilo moderno
                doc.setFillColor(...primaryColor);
                doc.rect(0, 0, 210, 25, 'F');
                
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(24);
                doc.setFont("helvetica", "bold");
                doc.text(lang.title, 105, 17, { align: 'center' });
                
                yPosition = 40;
                
                // InformaÃ§Ãµes do cabeÃ§alho em cards modernos
                doc.setTextColor(...textColor);
                doc.setFontSize(12);
                doc.setFont("helvetica", "normal");
                
                const vendedor = document.getElementById("vendedor").value || "NÃ£o informado";
                const loja = document.getElementById("loja").value || "NÃ£o informado";
                const pedido = document.getElementById("pedido").value || "NÃ£o informado";
                
                // Card 1 - InformaÃ§Ãµes bÃ¡sicas
                doc.setFillColor(...lightGray);
                doc.roundedRect(20, yPosition, 170, 25, 3, 3, 'F');
                
                doc.setTextColor(...secondaryColor);
                doc.setFont("helvetica", "bold");
                doc.text(lang.salesperson, 25, yPosition + 8);
                doc.text(lang.storeNumber, 25, yPosition + 16);
                doc.text(lang.orderNumber, 25, yPosition + 24);
                
                doc.setFont("helvetica", "normal");
                doc.text(vendedor, 80, yPosition + 8);
                doc.text(loja, 80, yPosition + 16);
                doc.text(pedido, 80, yPosition + 24);
                
                yPosition += 35;
                
                // SeÃ§Ã£o de Portas
                const numeroPortas = parseInt(document.getElementById("numeroPortas").value) || 0;
                if (numeroPortas > 0) {
                    // TÃ­tulo da seÃ§Ã£o
                    doc.setFillColor(...primaryColor);
                    doc.rect(20, yPosition, 170, 8, 'F');
                    doc.setTextColor(255, 255, 255);
                    doc.setFont("helvetica", "bold");
                    doc.setFontSize(14);
                    doc.text(lang.doorDetails, 25, yPosition + 6);
                    
                    yPosition += 15;
                    
                    document.querySelectorAll(".porta-section").forEach((section, index) => {
                        if (yPosition > 250) {
                            doc.addPage();
                            yPosition = 20;
                        }
                        
                        const descricao = section.querySelector(".descricao").value || "";
                        const tipoAbertura = section.querySelector(".tipoAbertura").value || "";
                        const cor = section.querySelector(".cor").value || "";
                        const preco = parseFloat(section.querySelector(".precoUnitario").value) || 0;
                        const observacoes = section.querySelector(".observacoes").value || "";
                        
                        // Card da porta
                        doc.setFillColor(248, 249, 250);
                        doc.roundedRect(20, yPosition, 170, 30, 2, 2, 'F');
                        
                        doc.setTextColor(...textColor);
                        doc.setFont("helvetica", "bold");
                        doc.setFontSize(12);
                        doc.text(`${lang.door} ${index + 1}`, 25, yPosition + 8);
                        
                        doc.setFont("helvetica", "normal");
                        doc.setFontSize(10);
                        doc.text(`${lang.description} ${descricao}`, 25, yPosition + 15);
                        doc.text(`${lang.openingType} ${tipoAbertura}`, 25, yPosition + 20);
                        doc.text(`${lang.color} ${cor}`, 25, yPosition + 25);
                        
                        const currency = currentLanguage === 'en' ? '$' : currentLanguage === 'it' ? 'â‚¬' : 'R$';
                        doc.setFont("helvetica", "bold");
                        doc.text(`${lang.unitPrice} ${currency} ${preco.toFixed(2)}`, 120, yPosition + 15);
                        
                        if (observacoes) {
                            doc.setFont("helvetica", "italic");
                            doc.setFontSize(9);
                            doc.text(`${lang.observations} ${observacoes}`, 25, yPosition + 30);
                            yPosition += 5;
                        }
                        
                        yPosition += 40;
                    });
                }
                
                // SeÃ§Ã£o BRISE
                const numeroBrise = parseInt(document.getElementById("numeroBrise").value) || 0;
                if (numeroBrise > 0) {
                    if (yPosition > 220) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    // TÃ­tulo da seÃ§Ã£o BRISE
                    doc.setFillColor(243, 156, 18); // cor laranja para BRISE
                    doc.rect(20, yPosition, 170, 8, 'F');
                    doc.setTextColor(255, 255, 255);
                    doc.setFont("helvetica", "bold");
                    doc.setFontSize(14);
                    doc.text(lang.briseItems, 25, yPosition + 6);
                    
                    yPosition += 15;
                    
                    document.querySelectorAll(".brise-item-section").forEach((section, index) => {
                        if (yPosition > 250) {
                            doc.addPage();
                            yPosition = 20;
                        }
                        
                        const cor = section.querySelector(".briseCor").value || "";
                        const m2 = parseFloat(section.querySelector(".briseM2").value) || 0;
                        const valor = parseFloat(section.querySelector(".briseValor").value) || 0;
                        const observacoes = section.querySelector(".briseObservacoes").value || "";
                        
                        // Card do BRISE
                        doc.setFillColor(254, 249, 231); // fundo claro laranja
                        doc.roundedRect(20, yPosition, 170, 25, 2, 2, 'F');
                        
                        doc.setTextColor(...textColor);
                        doc.setFont("helvetica", "bold");
                        doc.setFontSize(12);
                        doc.text(`${lang.brise} ${index + 1}`, 25, yPosition + 8);
                        
                        doc.setFont("helvetica", "normal");
                        doc.setFontSize(10);
                        doc.text(`${lang.color} ${cor}`, 25, yPosition + 15);
                        doc.text(`${lang.m2} ${m2.toFixed(2)}`, 25, yPosition + 20);
                        
                        const currency = currentLanguage === 'en' ? '$' : currentLanguage === 'it' ? 'â‚¬' : 'R$';
                        doc.setFont("helvetica", "bold");
                        doc.text(`${lang.value} ${currency} ${valor.toFixed(2)}`, 120, yPosition + 15);
                        
                        if (observacoes) {
                            doc.setFont("helvetica", "italic");
                            doc.setFontSize(9);
                            doc.text(`${lang.observations} ${observacoes}`, 25, yPosition + 25);
                            yPosition += 5;
                        }
                        
                        yPosition += 35;
                    });
                }
                
                // SeÃ§Ã£o EXTRAS
                const numeroItensExtras = parseInt(document.getElementById("numeroItensExtras").value) || 0;
                if (numeroItensExtras > 0) {
                    if (yPosition > 220) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    // TÃ­tulo da seÃ§Ã£o EXTRAS
                    doc.setFillColor(...accentColor); // cor cinza para EXTRAS
                    doc.rect(20, yPosition, 170, 8, 'F');
                    doc.setTextColor(255, 255, 255);
                    doc.setFont("helvetica", "bold");
                    doc.setFontSize(14);
                    doc.text(lang.extraItems, 25, yPosition + 6);
                    
                    yPosition += 15;
                    
                    document.querySelectorAll(".extra-item-section").forEach((section, index) => {
                        if (yPosition > 250) {
                            doc.addPage();
                            yPosition = 20;
                        }
                        
                        const tipo = section.querySelector(".extraTipo").value || "";
                        const quantidade = parseFloat(section.querySelector(".extraQuantidade").value) || 0;
                        const valor = parseFloat(section.querySelector(".extraValor").value) || 0;
                        const observacoes = section.querySelector(".extraObservacoes").value || "";
                        const total = quantidade * valor;
                        
                        // Card do EXTRA
                        doc.setFillColor(250, 250, 250); // fundo claro cinza
                        doc.roundedRect(20, yPosition, 170, 30, 2, 2, 'F');
                        
                        doc.setTextColor(...textColor);
                        doc.setFont("helvetica", "bold");
                        doc.setFontSize(12);
                        doc.text(`${lang.extraItem} ${index + 1}`, 25, yPosition + 8);
                        
                        doc.setFont("helvetica", "normal");
                        doc.setFontSize(10);
                        doc.text(`${lang.itemType} ${tipo}`, 25, yPosition + 15);
                        doc.text(`${lang.quantity} ${quantidade}`, 25, yPosition + 20);
                        
                        const currency = currentLanguage === 'en' ? '$' : currentLanguage === 'it' ? 'â‚¬' : 'R$';
                        doc.text(`${lang.price} ${currency} ${valor.toFixed(2)}`, 25, yPosition + 25);
                        doc.setFont("helvetica", "bold");
                        doc.text(`${lang.totalPrice} ${currency} ${total.toFixed(2)}`, 120, yPosition + 20);
                        
                        if (observacoes) {
                            doc.setFont("helvetica", "italic");
                            doc.setFontSize(9);
                            doc.text(`${lang.observations} ${observacoes}`, 25, yPosition + 30);
                            yPosition += 5;
                        }
                        
                        yPosition += 40;
                    });
                }
                
                // Total Geral
                if (yPosition > 240) {
                    doc.addPage();
                    yPosition = 20;
                }
                
                yPosition += 10;
                
                // Card do total
                doc.setFillColor(...primaryColor);
                doc.roundedRect(20, yPosition, 170, 20, 3, 3, 'F');
                
                doc.setTextColor(255, 255, 255);
                doc.setFont("helvetica", "bold");
                doc.setFontSize(18);
                
                const totalText = document.getElementById("totalGeral").textContent;
                doc.text(`${lang.grandTotal} ${totalText}`, 105, yPosition + 13, { align: 'center' });
                
                // Salvar o PDF
                const nomeArquivo = `orcamento_${pedido.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`;
                doc.save(nomeArquivo);
                
            } catch (error) {
                console.error('Erro ao gerar PDF:', error);
                alert('Erro ao gerar o PDF. Verifique se todos os campos estÃ£o preenchidos corretamente.');
            }
        }

        // Inicializar a pÃ¡gina
        window.onload = function() {
            gerarNumeroPedido();
            atualizarPortas();
            calcularTotalGeral();
        };
    </script>
</body>
</html>

